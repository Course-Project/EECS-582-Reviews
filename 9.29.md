Using Magpie for request extraction and workload modelling
===

###### Paul Barham, Austin Donnelly, Rebecca Isaacs, and Richard Mortier

###### Reviewer: Shengtuo Hu (shengtuo@umich.edu)

---

### What is the Problem?

Tools to understand complex system behavior are essential for many performance analysis and debugging tasks, yet there are many open research problems in their development. However, current methods for constructing workload models are unsophisticated, though performance modeling is of key importance for commercial enterprises such as data centers.

### Summary

Magpie is a toolchain for automatically extracting a system's workload under realistic operating conditions. Unlike other solutions to track requests, Magpie accurately attributes actual usage of CPU, disk, and network to the appropriate request. To achieve this goal, Magpie correlates the events that were generated while the requests were live, using a schema to specify the event relationships and carrying out a temporal join over the event stream. Furthermore, this paper presents a concise workload model and validates the accuracy of the extracted workload models using synthetic data as well as the performance against realistic workloads.

### Key Insights

- The authors think that, for detailed analysis of individual request behavior, it would be useful to combine how the request could have been serviced with how the data actually was serviced.

### Notable Design Details/Strengths

- The Magpie request tracking technique is unique because it uses event logs in a realistic operating environment. Thus, the parsed event trace of each individual request is recorded, giving a detailed picture of how requests are actually being serviced within the system.
- Magpie addresses the problem of grouping log messages generated by the same request in a distributed environment. Once the log messages are grouped in per-request basis, they could compute the resource consumption for each request, then use clustering techniques to learn the common patterns for each request, and identify anomalous requests.

### Limitations/Weaknesses

- Magpie characterizes transaction resource footprints in fine detail but requires that application logic be meticulously encoded in event schema. In other words, Magpie relies on programmers to place instrumentation points in the appropriate system modules.
- Even though Magpie provides detailed performance information to manually infer root causes, it still does not automatically diagnose why the observed performance anomalies occur.

### Summary of Key Results

- Running the Magpie parser to extract requests online does not introduce large overhead, giving a performance overhead of approximately 4%.

### Open Questions

To identify and isolate the outliers can contribute to a much more accurate workload modeling. Thus, it may be an open question to dig into this field in order to improve the quality of the workload model.
